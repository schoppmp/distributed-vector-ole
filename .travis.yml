language: cpp
compiler: g++
matrix:
  - dist: bionic
  - dist: disco

before_install:
  - apt-get update
  - apt-get install -y build-essential git openjdk-11-jdk gnupg2 curl patch m4 cmake libboost-system-dev
  - echo "deb [arch=amd64] https://storage.googleapis.com/bazel-apt stable jdk1.8" | tee /etc/apt/sources.list.d/bazel.list
  - curl https://bazel.build/bazel-release.pub.gpg | apt-key add -
  - apt-get update && apt-get install -y bazel

script:
  - bazel build ...
  - bazel test ...